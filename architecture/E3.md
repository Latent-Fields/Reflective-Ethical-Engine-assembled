

# E3 ‚Äî Trajectory Selection and Commitment Engine

> **üìç Canonical Location:** This content has been migrated to [`docs/architecture/e3.md`](../docs/architecture/e3.md) with formal claim typing and dependency tracking. This file is preserved for compatibility.

E3 is the component of the Reflective Ethical Engine (REE) responsible for selecting, stabilising, and committing a trajectory through a temporally displaced latent space.  
It is the mechanism by which prediction becomes lived experience.

E3 does **not** select instantaneous actions or perceptual states.  
It selects *trajectories* and determines whether a unitary present (‚Äúnow‚Äù) is constructed at all.

---

## 1. Architectural role

E3 sits downstream of predictive generation (E1, E2) and upstream of action, memory consolidation, and subjective experience.

Its core functions are:

- Selection of a coherent trajectory across predictive depths
- Conditional commitment to that trajectory
- Temporal collapse of displaced predictions into an experienced present
- Enforcement of perceptual corrigibility and ethical constraint

E3 operates only when licensed by global viability and attention signals (see Precision Control).

---

## 2. Inputs and outputs (interface contract)

### Inputs

E3 receives:

- A **temporally displaced latent bundle**  
  \( \mathcal{B}_t = \{ \hat z_k(t+\Delta) \}_{k \in K} \)  
  (see `latent_stack.md`)

- A **precision profile**  
  \( \alpha = \{ \alpha_k \}_{k \in K} \)  
  (see `precision_control.md`)

- A **residue / ethical curvature field**  
  \( \mathcal{R}(\cdot) \)  
  (see `residue_geometry.md`)

- Feasibility and invariant constraints  
  (dynamics, safety, care budget)

- Global affective / viability signals  
  (reward, harm, uncertainty tolerance, kin relevance)

### Outputs

E3 emits:

- A selected trajectory \( \tau^\* \) (or null)
- A **commitment signal**
- Precision escalation or suppression directives
- Action gating / policy parameters
- Memory write-enable signals

---

## 3. What E3 selects

A **trajectory** \( \tau \) is a path through the displaced latent bundle over a horizon \(H\):

\[
\tau = \big(
a_{t:t+H},
\hat z_{K,\,t:t+H},
\hat o_{t:t+H}
\big)
\]

Trajectories may be generated by:
- fast predictor rollouts (affordance-level)
- deep predictor rollouts (narrative / workspace)
- hippocampal replay and braid mechanisms

---

## 4. Selection functional (symbolic)

E3 selects the trajectory that minimises a composite energy functional:

\[
\tau^\* =
\arg\min_{\tau \in \Omega}
\Big[
\lambda_C\,\mathcal{C}(\tau;\alpha)
+ \lambda_R\,\mathcal{R}(\tau)
+ \lambda_F\,\mathcal{F}(\tau)
- \lambda_I\,\mathcal{I}(\tau)
+ \lambda_P\,\mathcal{P}(\tau)
\Big]
\]

Where:

- \( \mathcal{C}(\tau;\alpha) \) ‚Äî cross-horizon coherence cost  
- \( \mathcal{R}(\tau) \) ‚Äî residue / ethical curvature cost  
- \( \mathcal{F}(\tau) \) ‚Äî feasibility and control cost  
- \( \mathcal{I}(\tau) \) ‚Äî epistemic value (exploration benefit)  
- \( \mathcal{P}(\tau) \) ‚Äî phase-lock / temporal collapse penalty  

The coefficients \( \lambda \) are modulated by precision and affective state.

---

## 5. Coherence and depth interaction

Coherence is evaluated both:

- **Within depth**: prediction error weighted by precision
- **Across depth**: agreement between projected representations at different horizons

Deep regime predictors (reward, threat, attachment) bias selection *via precision and scoring*, not semantic overwrite, preserving perceptual corrigibility.

---

## 6. Commitment and temporal collapse

E3 operates in two regimes:

### Exploratory regime
- Multiple trajectories evaluated
- Low action-depth precision
- No phase-locking to motor execution
- No unitary present constructed  
  (see `Default_mode.md`)

### Committed regime
- A single trajectory is stabilised
- Action-depth precision is increased
- Predictions are phase-aligned with motor timing
- A unitary present (‚Äúnow‚Äù) is constructed

Commitment is triggered when a trajectory is:
- sufficiently coherent,
- ethically admissible,
- feasible,
- and licensed by global viability signals.

---

## 7. Precision as control

Precision does not merely tune learning rates.  
It controls whether temporal collapse occurs at all.

- High action-depth precision ‚Üí lived present
- Balanced precision ‚Üí sustained exploration
- Misallocated precision ‚Üí fragmentation or pathological collapse

(see `precision_control.md`)

---

## 8. Failure regimes (E3 pathologies)

Misconfiguration of E3 yields characteristic failure modes:

- **Over-commitment**  
  Excessive temporal collapse ‚Üí mania, compulsivity

- **Under-commitment**  
  Failure to collapse ‚Üí indecision, apathy

- **Fragmentation**  
  Competing trajectories ‚Üí panic, dissociation

- **False coherence**  
  Deep regime overwrite ‚Üí psychosis-like states

These are architectural regime failures, not simple parameter errors.

---

## 9. Summary

E3 is the engine that turns prediction into experience.

It:
- selects trajectories, not moments,
- constructs the present conditionally,
- enforces ethical and perceptual constraint,
- and grounds selfhood in the sustained act of commitment under uncertainty.

Without E3, REE predicts.
With E3, REE lives.